ext {
   buildDir = 'build'

   eclipseVersion = 'eclipse-dsl-neon-2-win32-x86_64'

   // The URL of the Eclipse Zip.  The Eclipse Zip is only downloaded if needed.
   eclipseDownloadUrl = "http://10.207.42.43/resources/jellyfish/${eclipseVersion}.zip"
   // The cache location of downloaded files.
   eclipseCache = '../.gradle/eclipse'
   // The local file to save the ZIP to.
   eclipseDownloadDestFile = "${eclipseCache}/${eclipseVersion}.zip"
   // This is the location where the Eclipse download will be unzipped to.
   // Note this name may change if the download URL changes to a different version of Eclipse.
   eclipseInstallationDirectory = file("${eclipseCache}/$eclipseVersion").getAbsolutePath()

   // This is the location of the Eclipse we use when compiling and building the
   // update site.
   eclipsePluginsDirectory = "$eclipseInstallationDirectory/plugins"

   // This is the location of the Eclispe exe we use to create the update site
   // metadata.
   eclipseExe = "$eclipseInstallationDirectory/eclipse.exe"
}

task clean() {
   doLast {
      delete("$buildDir")
   }
}

task downloadEclipse() {
   doLast {
      def destFile = file("$eclipseDownloadDestFile")
      destFile.getParentFile().mkdir()
      println "Downloading Eclipse SDK from $eclipseDownloadUrl..."
      new URL("$eclipseDownloadUrl").withInputStream { is ->
         destFile.withOutputStream { it << is  }
      }
   }
}
downloadEclipse.onlyIf { !file("$eclipseDownloadDestFile").exists() }

task unzipEclipse(type: Copy, dependsOn: downloadEclipse) {
   from zipTree(file("$eclipseDownloadDestFile"))
   into "$eclipseCache"
}
unzipEclipse.onlyIf { !file("$eclipseInstallationDirectory").exists() }

task build (dependsOn: unzipEclipse) {
}
