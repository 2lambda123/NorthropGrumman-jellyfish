apply plugin: 'com.ngc.seaside.service-distribution'

seasideDistribution {
    buildDir = 'build'
    distributionName = "${group}.${project.name}-${version}"
    distributionDir = "build/distribution/${group}.${project.name}-${version}"
    distributionDestDir = 'build/distribution/'
}

configurations {
   thirdParty2 {
      transitive = false
   }
}

dependencies {
   bundles project(":datps.events")
   bundles project(":datps.domain")
   bundles project(":datps.connector")
   bundles project(":datps.config")
   bundles project(":datps.base")
   bundles project(":datps.messages")
   bundles project(":datps.impl")
   bundles project(":datps.pubsubbridge")

   bundles "com.ngc.seaside:service.api:$starfishVersion"
   bundles "com.ngc.seaside:service.correlation.impl.correlationservice:$starfishVersion"
   bundles "com.ngc.seaside:service.fault.impl.faultloggingservice:$starfishVersion"
   bundles "com.ngc.seaside:service.monitoring.impl.loggingmonitoringservice:$starfishVersion"
   bundles "com.ngc.seaside:service.request.impl.microservicerequestservice:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.api:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.impl.defaulttransportservice:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.impl.topic.multicast:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.impl.provider.multicast:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.impl.topic.spark:$starfishVersion"
   bundles "com.ngc.seaside:service.telemetry.api:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.impl.provider.spark:$starfishVersion"
   bundles "com.ngc.seaside:service.log.impl.common.sl4jlogservicebridge:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.impl.topic.httpclient:$starfishVersion"
   bundles "com.ngc.seaside:service.transport.impl.provider.httpclient:$starfishVersion"
   bundles "com.ngc.seaside:service.telemetry.api:$starfishVersion"
   bundles "com.ngc.seaside:service.telemetry.impl.basetelemetryservice:$starfishVersion"
   bundles "com.ngc.seaside:service.telemetry.impl.jsontelemetryservice:$starfishVersion"

   blocs "com.ngc.blocs:api:$blocsCoreVersion"
   blocs "com.ngc.blocs:file.impl.common.fileutilities:$blocsCoreVersion"
   blocs "com.ngc.blocs:security.impl.common.securityutilities:$blocsCoreVersion"
   blocs "com.ngc.blocs:jaxb.impl.common.jaxbutilities:$blocsCoreVersion"
   blocs "com.ngc.blocs:xml.resource.impl.common.xmlresource:$blocsCoreVersion"
   blocs "com.ngc.blocs:service.log.impl.common.logservice:$blocsCoreVersion"
   blocs "com.ngc.blocs:service.api:$blocsCoreVersion"
   blocs "com.ngc.blocs:service.event.impl.common.eventservice:$blocsCoreVersion"
   blocs "com.ngc.blocs:service.resource.impl.common.resourceservice:$blocsCoreVersion"
   blocs "com.ngc.blocs:notification.impl.common.notificationsupport:$blocsCoreVersion"
   blocs "com.ngc.blocs:properties.resource.impl.common.propertiesresource:$blocsCoreVersion"
   blocs "com.ngc.blocs:service.framework.impl.common.frameworkmgmtservice:$blocsCoreVersion"
   blocs "com.ngc.blocs:component.impl.common.componentutilities:$blocsCoreVersion"
   blocs "com.ngc.blocs:service.notification.impl.common.notificationservice:$blocsCoreVersion"
   blocs "com.ngc.blocs:service.thread.impl.common.threadservice:$blocsCoreVersion"

   thirdParty 'com.sparkjava:spark-core:2.6.0'
   thirdParty 'com.google.guava:guava:17.0'
   thirdParty2 "com.google.guava:guava:$guavaVersion"
   thirdParty 'commons-io:commons-io:1.4'
   thirdParty 'log4j:log4j-osgi:1.2.17' // This version has the corrected log4j manifest.
   thirdParty 'commons-beanutils:commons-beanutils:1.8.3'
   thirdParty 'commons-lang:commons-lang:2.4'
   thirdParty 'commons-collections:commons-collections:3.2.1'
   thirdParty 'commons-logging:commons-logging-osgi:1.1.1'
   thirdParty "com.google.protobuf:protobuf-java:$protobufVersion"

   platform "com.ngc.blocs:service.deployment.impl.common.autodeploymentservice:$blocsCoreVersion"
   platform "org.eclipse.equinox:equinox-common:3.6.200.v20130402-1505"
   platform "org.eclipse.equinox:equinox-osgi-services:3.4.0.v20140312-2051"
   platform "org.eclipse.equinox:equinox-console:1.1.0.v20140131-1639"
   platform "org.eclipse.equinox:equinox-launcher:1.3.0.v20140415-2008"
   platform "org.apache.felix:gogo.runtime:0.10.0.v201209301036"
   platform "org.eclipse.equinox:equinox-registry:3.5.400.v20140428-1507"
   platform "org.apache.felix:gogo.command:0.10.0.v201209301215"
   platform "org.apache.felix:gogo.shell:0.10.0.v201212101605"
   platform "org.eclipse.equinox:equinox-ds:1.4.1-20120926-201320"
   platform "org.eclipse.equinox:equinox-util:1.0.500-20130404-1337"
   platform "org.eclipse.equinox:equinox-simpleconfigurator:1.1.0.v20131217-1203"
   platform "org.eclipse.equinox:equinox-osgi:3.10.0"
}

copyThirdPartyBundles {
   from configurations.thirdParty2
}
