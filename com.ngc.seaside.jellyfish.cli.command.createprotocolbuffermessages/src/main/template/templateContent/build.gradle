#set($D="$")

apply plugin: 'com.ngc.blocs.gradle.plugin.domain'

generateDomain {
   domainGenProperty('template.list', file('src/main/resources/velocity/proto-messages.vm'))
   domainGenProperty('extension.list', 'proto')
}

dependencies {
   compile "com.ngc.blocs:service.api:${D}blocsDomainVersion"
}

jar {
   manifest {
     attributes('Export-Package': 
       'com.ngc.seaside.threateval.engagementtrackpriorityservice.domain.*')
   }
}

////////////// Everything above is generated by default for the create-domain command

apply plugin: 'com.google.protobuf'

protobuf {
   protoc {
      artifact = "com.google.protobuf:protoc:${D}protobufVersion"
   }
}

sourceSets {
   main {
     proto {
       srcDir generateDomain.outputDirectory
     }
   }
}

sourceSets.all {
   java.srcDir "${D}{protobuf.generatedFilesBaseDir}/${D}name/java"
}

repositories {
   mavenLocal()

   maven {
      url nexusConsolidated
   }
}

dependencies {
   compile "com.google.protobuf:protobuf-java:${D}protobufVersion"
}

jar { ////////////////////////////// Not sure if this is needed; may be able to move the previous jar manifest here
   manifest {
      // Bnd instructions to export the api package.
      attributes('Export-Package': 'com.ngc.seaside.*')
   }
}
