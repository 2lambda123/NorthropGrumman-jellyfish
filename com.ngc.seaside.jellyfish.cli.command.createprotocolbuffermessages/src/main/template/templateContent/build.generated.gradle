#set($D="$")

apply plugin: 'com.ngc.blocs.gradle.plugin.domain'

generateDomain {
   domainGenProperty('template.list', file('src/main/resources/velocity/proto-messages.vm'))
   domainGenProperty('extension.list', 'proto')
}

dependencies {
   compile "com.ngc.blocs:service.api:${D}blocsDomainVersion"
}

#if(! $packages.isEmpty() )
jar {
   manifest {
      attributes('Export-Package': 
#foreach($pkg in $packages)
#if( $velocityHasNext )
         '$pkg.*,' + 
#else
         '$pkg.*')
#end
#end
   }
}
#end

apply plugin: 'com.google.protobuf'

protobuf {
   protoc {
      artifact = "com.google.protobuf:protoc:${D}protobufVersion"
   }
}

sourceSets {
   main {
     proto {
       srcDir generateDomain.outputDirectory
     }
   }
}

sourceSets.all {
   java.srcDir "${D}{protobuf.generatedFilesBaseDir}/${D}name/java"
}

dependencies {
   compile "com.google.protobuf:protobuf-java:${D}protobufVersion"
}
